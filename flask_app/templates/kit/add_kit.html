{% extends "layout.html" %}

{% block content %}
<form class="kit" name="kit" action="/add_kit_redirect" method="post">
	<div class="container my-container">
		<div class="row">
			<div class="col">
				<h1>Kit</h1>
				<h4>Master Information</h4>
			</div>
		</div>
		<div class="row">
			<div class="col-3 form-group">
				<label for="kit_name">Kit Name:</label>
				<input type="text" class="form-control" id="kit_name" name="kit_name" required>
			</div>
			<div class="col-3 form-group">
				<label for="manu_name">Manufacturer:</label>
				<select class="form-control" id="manu_name" name="manu_name"  onchange="enable(this)">
					<option value=""></option>
					{% for item in manu_name%}
					<option>{{ item.name }}</option>
					{% endfor %}
				</select>
			</div>
			<div class="col-4 form-group">
				<label for="kit_barcode">Box Lot Barcode:</label>
				<input type="text" class="form-control" id="kit_barcode" name="kit_barcode" oninput="update()" disabled>
			</div>
		</div>
		<div class="row my-row">
			<div class="col-3 form-group">
				<label for="kit_part_num">Part Number:</label>
				<input type="text" class="form-control" id="kit_part_num" name="kit_part_num" readonly>
			</div>
			<div class="col-3 form-group">
				<label for="kit_lot_num">Lot Number:</label>
				<input type="text" class="form-control" id="kit_lot_num" name="kit_lot_num" readonly>
			</div>
			<div class="col-3 form-group">
				<label for="exp_date">Expiry Date:</label>
				<input type="date" class="form-control" id="exp_date" name="exp_date" disabled>
			</div>
			<div class="col-2 form-group">
				<label for="quantity">Quantity:</label>
				<input type="number" value="0" min="0" max="100" step="1" name="quantity"
				       class="form-control" id="quantity"/>
			</div>
		</div>
		<hr/>
		<div class="row my-row">
			<div class="col">
				<h4>Component Information</h4>
			</div>
		</div>
		<div id="containers_div">
			<div id="container_div" style="padding-bottom:30px">
				<div class="row my-row">
					<div class="col-3 form-group">
						<label for="comp_name">Component Name:</label>
						<input type="text" class="form-control" name="comp_name" id="comp_name">
					</div>
					<div class="col-3 form-group">
						<label for="comp_barcode">Component Barcode:</label>
						<input type="text" class="form-control" name="comp_barcode" id="comp_barcode">
					</div>
					<div class="col-3 form-group">
						<label for="part_num">Part Number:</label>
						<input type="text" class="form-control" name="part_num" id="part_num">
					</div>
					<div class="col-3 form-group">
						<label for="lot_num">Lot Number:</label>
						<input type="text" class="form-control" name="lot_num" id="lot_num">
					</div>
				</div>
				<label for="condition"><a data-toggle="collapse" data-parent="#accordion" href="#condition_div">Component Condition:</a></label>
				<div id="condition_div" class="row my-row collapse">
					<div class="col-9 form-group">
						<input type="text" class="form-control" name="condition" id="condition">
					</div>
				</div>
			</div>
		</div>
		<div class="row my-row col-3">
			<button type="button" name="append" id="add_comp" onclick="add_element()">Add Component</button>
		</div>
		<br/>
		<div class="row my-row">
			<div class="col-1">
				<button type="button" class="btn btn-info" data-toggle="collapse" data-target="#print_div">
					Print...
				</button>
			</div>
			<div class="col-1">
				<button type="submit" class="btn btn-info" name="submit" id="submit">Save
				</button>
			</div>
			<div class="col-1">
				<button type="button" class="btn btn-outline-info" name="cancel" id="cancel"
				        onclick="openWindow();">
					Cancel
				</button>
			</div>
		</div>

		<hr/>
		<div id="print_div" class="collapse">
			<div class="row my-row">
				<div class="col">
					<h2>Print</h2>
				</div>
			</div>
			<div class="row my-row">
				<div class="col-2 form-group">
					<label for="small_label">Small Label Copies:</label>
					<input data-prefix="Copies" type="number" value="0" min="0" max="100" step="1"
					       class="form-control" name="small_label" id="small_label"/>
				</div>
			</div>
			<div class="row my-row">
				<div class="col-2 form-group">
					<label for="medium_label">Medium Label Copies:</label>
					<input type="number" value="0" min="0" max="100" step="1" name="medium_label"
					       class="form-control" id="medium_label"/>
				</div>
			</div>
			<div class="row my-row">
				<div class="col-3">
					<button type="button" class="btn btn-info" name="append" id="aaa" onclick="add_element()">Print</button>
				</div>
			</div>
		</div>
	</div>
</form>

<script>
	var _counter = 0;
	function add_element() {
		//var structure_kit = $('<div class="append-wrap">test</div>');

		//$(".containers_div").append(structure_kit.clone());
		_counter++;
		var oClone = document.getElementById("container_div").cloneNode(true);
		oClone.id += (_counter + "");
		document.getElementById("containers_div").appendChild(oClone);
	}

	function enable(element) {
            $("#kit_barcode").prop('disabled', false);
            $("#exp_date").prop('disabled', false);

	}

	function update() {
		document.getElementById("kit_part_num").setAttribute("value", document.getElementById("kit_barcode").value.slice(0, 5));
		document.getElementById("kit_lot_num").setAttribute("value", document.getElementById("kit_barcode").value.slice(10, 15));
	}
</script>
{% endblock content %}