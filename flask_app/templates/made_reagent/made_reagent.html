{% extends "layout.html" %}

{% block content %}
<div class="container my-container">
	<div class="row">
		<div class="col-9">
			<h2>Made-Reagent</h2>
		</div>
		<div class="col-1">
			<button type="button" class="btn btn-info" onclick="window.print();return false;">Print</button>
		</div>
		<div class="col-1">
            <form action="/made_reagent_delete/{{ made_reagent.id }}">
                <button type="submit" class="btn btn-info">Delete</button>
            </form>
        </div>
		<div class="col-1">
			<button type="button" class="btn btn-info" onclick="window.history.back();">Back</button>
		</div>
	</div>
	<hr/>
	<div class="row">
		<div class="col-12">
			<table class="table table-hover master">
				<tr>
					<th>Made Reagent Name</th>
					<td>{{ made_reagent.name }}</td>
				</tr>
				<tr>
					<th>Date Entered</th>
					<td>{{ made_reagent.date_entered.strftime("%B %e, %Y") }}</td>
				</tr>
				<tr>
					<th>Expiry Date</th>
					{% if made_reagent.exp_date %}
					<td>{{ made_reagent.exp_date.strftime("%B %e, %Y") }}</td>
					{% elif not made_reagent.exp_date %}
					<td>N/A</td>
					{% endif %}
				</tr>
			</table>
			<br/>
			<h4>Components</h4>
			<hr/>
			<table class="table table-hover">
				<thead>
				<tr>
					<th>Name</th>
					<th>Barcode</th>
					<th>Part Number</th>
					<th>Lot Number</th>
					<th>Condition</th>
				</tr>
				</thead>
				<tbody>
				{% for component in component_list %}
				{% for comp in [Component.query.filter_by(name=component)[0]]*component_list[component] %}
				<tr>
					<td>{{ comp.name }}</td>
					<td>{{ comp.barcode }}</td>
					<td>{{ comp.part_num }}</td>
					<td>{{ comp.lot_num }}</td>
					<td>{{ comp.condition }}</td>
				</tr>
				{% endfor %}
				{% endfor %}
				</tbody>
			</table>
			<br/>
			<h4>Reagents</h4>
			<hr/>
			<table class="table table-hover">
				<thead>
				<tr>
					<th>Name</th>
					<th>Barcode</th>
					<th>Part Number</th>
					<th>Lot Number</th>
				</tr>
				</thead>
				<tbody>
				{% for reagent in reagent_list %}
				{% for reag in [Reagent.query.filter_by(name=reagent)[0]]*reagent_list[reagent] %}
				<tr>
					<td>{{ reag.name }}</td>
					<td>{{ reag.barcode }}</td>
					<td>{{ reag.part_num }}</td>
					<td>{{ reag.lot_num }}</td>
				</tr>
				{% endfor %}
				{% endfor %}
				</tbody>
			</table>
		</div>
	</div>
</div>
{% endblock content %}